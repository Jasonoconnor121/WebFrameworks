extends layout
block content
    .classDiv
        .container-fluid
            .row
                .col-4
                    .card
                        .card-body
                        h5.card-title= pageInfo.card1Title
                        p.card-text
                            | #{pageInfo.card1Text1} 
                            br
                            | #{pageInfo.card1Text2}
                        a.btn.btn-primary(href='#' id=pageInfo.card1ID)= pageInfo.card1Button
                .col-4
                    .card
                        .card-body
                        h5.card-title= pageInfo.card2Title
                        p.card-text
                            | #{pageInfo.card2Text1}
                            br
                            | #{pageInfo.card2Text2}
                        a.btn.btn-primary(href='#' id=pageInfo.card2ID)= pageInfo.card3Button
                .col-4
                    .card
                        .card-body
                        h5.card-title= pageInfo.card3Title
                        p.card-text
                            | #{pageInfo.card3Text1}
                            br
                            | #{pageInfo.card3Text2}
                        a.btn.btn-primary(href='#' id=pageInfo.card3ID)= pageInfo.card3Button



    script.
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.btn-primary');

            buttons.forEach(button => {
                button.addEventListener('click', function(e) {

                    const id = this.id;

                    fetch(`/api/getClassInfo/${id}`)
                        .then(response => response.json())
                        .then(data => {
                            const newCard = document.createElement('div');
                        newCard.classList.add('row', 'mt-3'); // Bootstrap row for full width alignment

                        newCard.innerHTML = `
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">${data.classTitle}</h5>
                                        <p class="card-text">${data.classDescription}</p>
                                        <p><strong>Instructor:</strong> ${data.instructor}</p>
                                        <p><strong>Class Times:</strong> ${data.classTimes.join(', ')}</p>
                                    </div>
                                </div>
                            </div>
                        `;

                        document.querySelector('.container-fluid').appendChild(newCard);
                        })
                        .catch(error => {
                            console.error('Error fetching class details:', error);
                            alert('Failed to load class details');
                        });
                });
            });
        });